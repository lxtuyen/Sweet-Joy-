<div class="container my-5">
  <h2 class="mb-4" style="font-family:'Pacifico'">üõí Gi·ªè h√†ng</h2>

  <% if (cart.length === 0) { %>
    <p class="text-muted">Gi·ªè h√†ng tr·ªëng üò¢</p>
    <a href="/" class="btn btn-danger">Ti·∫øp t·ª•c mua s·∫Øm</a>
  <% } else { %>

  <table class="table align-middle text-center">
    <thead class="table-light">
      <tr>
        <th>S·∫£n ph·∫©m</th>
        <th>Gi√°</th>
        <th>S·ªë l∆∞·ª£ng</th>
        <th>Th√†nh ti·ªÅn</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% cart.forEach(item => { %>
        <tr>
          <td class="text-start">
            <img src="<%= item.product.image %>" width="60" class="me-2 rounded">
            <strong><%= item.product.name %></strong>
          </td>

          <td class="text-danger fw-bold">
            <%= item.product.price.toLocaleString() %> ƒë
          </td>

          <!-- üî• TƒÉng / Gi·∫£m s·ªë l∆∞·ª£ng -->
          <td>
            <form action="/cart/update" method="POST" class="d-flex justify-content-center align-items-center gap-2">
              <input type="hidden" name="productId" value="<%= item.product._id %>">

              <button type="submit" name="action" value="decrease"
                class="btn btn-sm btn-outline-dark fw-bold">Ôºç</button>

              <span class="mx-1 fw-bold fs-6"><%= item.quantity %></span>

              <button type="submit" name="action" value="increase"
                class="btn btn-sm btn-outline-dark fw-bold">Ôºã</button>
            </form>
          </td>

          <td class="fw-bold">
            <%= (item.product.price * item.quantity).toLocaleString() %> ƒë
          </td>

          <td>
            <form action="/api/cart/add" method="POST">
              <input type="hidden" name="productId" value="<%= p._id %>">
                <button type="submit" class="btn btn-outline-danger btn-sm">
                  Th√™m v√†o gi·ªè h√†ng
                </button>
            </form>

          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>

  <h4 class="text-end mt-3">
    T·ªïng ti·ªÅn:
    <span class="text-danger fw-bold fs-4">
      <%= total.toLocaleString() %> ƒë
    </span>
  </h4>

  <div class="text-end mt-4">
    <a href="/" class="btn btn-outline-secondary me-2">‚Üê Mua th√™m</a>
    <a href="/checkout" class="btn btn-danger">Thanh to√°n</a>
  </div>

  <% } %>
</div>
